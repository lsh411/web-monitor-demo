<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>í—¬ë¡œì˜¨ ëŒ€ì‹œë³´ë“œ</title>
  <link rel="stylesheet" href="style.css?v=1.0.0">
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=76614caefbdbf2a0cc21c70f2f43abd9"></script>

  <!-- ì™¸ì¶œ ìƒì„¸ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ (outing-report.htmlì—ì„œ ì¬í™œìš©) -->
  <style>
    /* ìƒì„¸ ëª¨ë‹¬ */
    .day-detail-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    .day-detail-modal.active {
      display: flex;
    }
    .day-detail-content {
      background: #FFFFFF;
      border-radius: 12px;
      padding: 20px;
      width: 90%;
      max-width: 500px;
      max-height: 70vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }
    .day-detail-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #E5E7EB;
    }
    .day-detail-title {
      font-size: 1.125rem;
      font-weight: 700;
      color: #111827;
    }
    .day-detail-close {
      width: 28px;
      height: 28px;
      border: none;
      background: #F3F4F6;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .day-detail-close:hover {
      background: #E5E7EB;
    }
    .day-detail-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .day-detail-item {
      background: #F9FAFB;
      border-radius: 10px;
      overflow: hidden;
    }
    .detail-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .detail-header:hover {
      background: #F3F4F6;
    }
    .detail-profile {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }
    .detail-info {
      flex: 1;
      min-width: 0;
    }
    .detail-name {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }
    .detail-meta {
      font-size: 12px;
      color: #6B7280;
      margin-top: 2px;
    }
    .detail-time {
      text-align: right;
      flex-shrink: 0;
    }
    .detail-time-value {
      font-size: 14px;
      font-weight: 600;
      color: #2A6AA6;
    }
    .detail-time-label {
      font-size: 11px;
      color: #9CA3AF;
    }
    .detail-expand-icon {
      font-size: 10px;
      color: #9CA3AF;
      margin-left: 4px;
      transition: transform 0.2s;
    }
    /* ìœ„ì¹˜ ì´ë ¥ ì„¹ì…˜ */
    .detail-locations {
      border-top: 1px solid #E5E7EB;
      background: #fff;
    }
    .locations-header {
      padding: 10px 12px;
      font-size: 12px;
      font-weight: 600;
      color: #6B7280;
      background: #F3F4F6;
    }
    .locations-list {
      max-height: 300px;
      overflow-y: auto;
    }
    .location-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #F3F4F6;
      cursor: pointer;
      transition: background 0.2s;
    }
    .location-item:hover {
      background: #F9FAFB;
    }
    .location-item:last-of-type {
      border-bottom: none;
    }
    .location-time {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
      width: 50px;
    }
    .location-distance {
      font-size: 12px;
      color: #6B7280;
      margin-left: 12px;
      white-space: nowrap;
    }
    .location-address {
      flex: 1;
      font-size: 13px;
      color: #374151;
      margin-left: 12px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .location-accuracy {
      font-size: 11px;
      color: #9CA3AF;
      margin-left: 8px;
      white-space: nowrap;
    }
    .location-item-empty {
      padding: 20px;
      text-align: center;
      color: #9CA3AF;
      font-size: 13px;
    }
    /* ì§€ë„ ì»¨í…Œì´ë„ˆ */
    .location-map-container {
      height: 200px;
      margin: 0 12px 12px 12px;
      border-radius: 8px;
      overflow: hidden;
      background: #E5E7EB;
    }
    /* ìš”ì•½ ì •ë³´ */
    .outing-report-summary {
      padding: 12px 16px;
      background: #EFF6FF;
      border-radius: 8px;
      margin-bottom: 16px;
      text-align: center;
    }
    .outing-summary-text {
      font-size: 14px;
      color: #1E40AF;
      font-weight: 500;
    }
    .outing-summary-none {
      background: #F3F4F6;
    }
    .outing-summary-none .outing-summary-text {
      color: #6B7280;
    }
  </style>

  <!-- ë¡œê·¸ì¸ ì²´í¬ -->
  <script>
    // ë¡œê·¸ì¸ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (localStorage.getItem('isLoggedIn') !== 'true') {
      window.location.href = 'index.html';
    }

    // silvercare2 ì‚¬ìš©ìê°€ ì•„ë‹ˆë©´ ì ì ˆí•œ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    const userType = localStorage.getItem('userType');
    if (userType === 'admin') {
      window.location.href = 'dashboard.html';
    } else if (userType === 'silvercare') {
      window.location.href = 'dashboard-poc.html';
    }
  </script>
</head>
<body>
  <div class="main-bg">
    <header class="main-header">
      <div class="logo-nav">
        <img src="assets/hello-on_logotype.png" alt="í—¬ë¡œì˜¨ ë¡œê³ " class="hello-logo" />
        <nav class="gnb">
          <button class="gnb-btn active" data-page="dashboard.html" onclick="navigateTo('dashboard.html')"><span class="icon dashboard"></span>ëŒ€ì‹œë³´ë“œ</button>
          <button class="gnb-btn" data-page="record.html" onclick="navigateTo('record.html')"><span class="icon record"></span>ê´€ë¦¬ê¸°ë¡</button>
          <button class="gnb-btn" data-page="outing-report.html" onclick="navigateTo('outing-report.html')"><span class="icon record"></span>ì™¸ì¶œë¦¬í¬íŠ¸</button>
          <button class="gnb-btn" data-page="attendance-report.html" onclick="navigateTo('attendance-report.html')"><span class="icon record"></span>ì¶œí‡´ê·¼</button>
          <button class="gnb-btn" data-page="ai-report.html" onclick="navigateTo('ai-report.html')"><span class="icon record"></span>AIë¦¬í¬íŠ¸</button>
        </nav>
      </div>
      <div class="header-actions">
        <button class="settings-btn" title="ì¸ì› ê´€ë¦¬">
          <span class="icon settings"></span>
        </button>
        <!-- <button class="alarm-btn"><span class="icon alarm"></span></button> -->
        <div class="user-menu">
          <span class="user-name" id="user-display-name">admin</span>
          <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
      </div>
    </header>
    <main class="dashboard-main" id="main-content">
      <section class="dashboard-status-bar">
        <span class="dashboard-title">ìŠ¤ë§ˆíŠ¸ ìš”ì–‘ì› ëŒ€ì‹œë³´ë“œ</span>
        <span class="dashboard-desc">ì‹œì„¤ì˜ ì „ì²´ í˜„í™©ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” í˜ì´ì§€ ì…ë‹ˆë‹¤. í•„ìš”ì‚¬í•­ì„ ë³´ê¸° ì‰½ê²Œ ë³€ê²½/ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
        <span class="dashboard-date">5ì›” 8ì¼ ëª©ìš”ì¼</span>
      </section>
      <section class="alert-section hidden">
        <div class="alert-card">
          <img src="assets/status_01.png" class="alert-profile">
          <span class="alert-name">ê¹€ì˜ìˆ˜</span>
          <img src="assets/caution_icon.png" class="alert-icon">
          <span class="alert-title">ë†’ì€ ì‹¬ë°•ìˆ˜ ê°ì§€</span>
          <span class="alert-desc">ì‹¬ë°•ìˆ˜ê°€ 107bpm ì´ìƒ ì…ë‹ˆë‹¤.<br>ë„ì›€ì´ í•„ìš”í•˜ì‹ ì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</span>
          <button class="alert-btn">ë‹´ë‹¹ì í˜¸ì¶œ</button>
        </div>
        <div class="alert-card">
          <img src="assets/status_02.png" class="alert-profile">
          <span class="alert-name">ê¹€ìˆœì</span>
          <img src="assets/caution_icon.png" class="alert-icon">
          <span class="alert-title">ë‚™ìƒ ê°ì§€</span>
          <span class="alert-desc">ë„˜ì–´ì§ì´ ìŠ¤ë§ˆíŠ¸ ìœ„ì¹˜ë¡œ í™•ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ë„ì›€ì´ í•„ìš”í•˜ì‹ ì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</span>
          <button class="alert-btn">ë‹´ë‹¹ì í˜¸ì¶œ</button>
        </div>
      </section>
      <section class="dashboard-content">
        <!-- AI ì¼ì¼ ë¦¬í¬íŠ¸ -->
        <div class="ai-daily-report">
          <div class="ai-report-header">
            <div class="ai-report-title">
              <span class="report-icon">ğŸ“„</span>
              <span class="report-date" id="ai-report-date">2025.12.12 (ëª©) ì¼ì¼ ë¦¬í¬íŠ¸</span>
            </div>
            <!-- <div class="ai-report-actions">
              <button class="btn btn-sm btn-outline" onclick="printReport()">ğŸ–¨ï¸ PDF</button>
              <button class="btn btn-sm btn-outline" onclick="sendReport()">âœ‰ï¸ ì „ì†¡</button>
            </div> -->
          </div>

          <div class="ai-summary-box">
            <div class="ai-summary-label">ğŸ¤– AI ìš”ì•½ (ì˜¤ëŠ˜ì˜ íŠ¹ì´ì‚¬í•­)</div>
            <div class="ai-summary-content" id="ai-summary-text">
              <span class="loading">AI ìš”ì•½ ìƒì„± ì¤‘...</span>
            </div>
          </div>

          <!-- ìƒì„¸ ì„¹ì…˜: ì´ë²¤íŠ¸ / ê±´ê°•í˜„í™© / ì™¸ì¶œí˜„í™© / ë°°í„°ë¦¬ -->
          <div class="ai-detail-sections">
            <!-- ì´ë²¤íŠ¸ ë¡œê·¸ -->
            <div class="ai-detail-section" id="section-events">
              <div class="ai-detail-header">
                <span class="ai-detail-icon">âš ï¸</span>
                <span class="ai-detail-title">ì˜¤ëŠ˜ì˜ ì´ë²¤íŠ¸</span>
                <span class="ai-detail-count" id="events-count">0ê±´</span>
              </div>
              <div class="ai-detail-content" id="events-content">
                <div class="ai-detail-empty">ì˜¤ëŠ˜ ë°œìƒí•œ ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
              </div>
            </div>

            <!-- ê±´ê°• í˜„í™© -->
            <div class="ai-detail-section" id="section-health">
              <div class="ai-detail-header">
                <span class="ai-detail-icon">ğŸ’š</span>
                <span class="ai-detail-title">ê±´ê°• í˜„í™©</span>
                <span class="ai-detail-count" id="health-count">-</span>
              </div>
              <div class="ai-detail-content ai-detail-content-no-scroll" id="health-content">
                <div class="ai-detail-empty">ê±´ê°• ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
              </div>
            </div>

            <!-- ì™¸ì¶œ í˜„í™© -->
            <div class="ai-detail-section" id="section-outing">
              <div class="ai-detail-header">
                <span class="ai-detail-icon">ğŸš¶</span>
                <span class="ai-detail-title">ì™¸ì¶œ í˜„í™©</span>
                <span class="ai-detail-count" id="outing-count">0ëª…</span>
              </div>
              <div class="ai-detail-content" id="outing-content">
                <div class="ai-detail-empty">ì˜¤ëŠ˜ ì™¸ì¶œ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>
              </div>
            </div>

            <!-- ë°°í„°ë¦¬ ê²½ê³  -->
            <div class="ai-detail-section" id="section-battery">
              <div class="ai-detail-header">
                <span class="ai-detail-icon">ğŸ”‹</span>
                <span class="ai-detail-title">ë°°í„°ë¦¬ ê²½ê³ </span>
                <span class="ai-detail-count" id="battery-count">0ëª…</span>
              </div>
              <div class="ai-detail-content" id="battery-content">
                <div class="ai-detail-empty">ë°°í„°ë¦¬ ë¶€ì¡± ì›Œì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="resident-status-card">
          <div class="resident-header">
            <span class="card-title">ì…ì†Œì¸ ìƒíƒœ ëª©ë¡</span>
            <div class="resident-header-right">
              <span class="last-refresh">0ì´ˆ ì „ refresh </span>
            </div>
          </div>
          <div class="resident-table-wrapper">
            <table class="resident-table">
              <thead>
                <tr>
                  <th>ì´ë¦„</th>
                  <th>ë‚˜ì´</th>
                  <th>ìƒíƒœ</th>
                  <th>ìœ„ì¹˜</th>
                  <th>ì™¸ì¶œ</th>
                  <th>ì‹¬ë°•ìˆ˜</th>
                  <th>ê±¸ìŒìˆ˜</th>
                  <th>ì›Œì¹˜ìƒíƒœ</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="8" style="text-align: center; padding: 40px; color: #6B7280;">ë°ì´í„° ë¡œë”© ì¤‘...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

<!-- Inmate detail modal -->
<div id="inmate-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <button id="inmate-modal-close" class="modal-close">âœ•</button>
    <h2 class="modal-title">ì…ì†Œ ì¸ì› ìƒì„¸</h2>
    <button class="modal-edit-btn" onclick="alert('í¸ì§‘ ê¸°ëŠ¥ì€ ì•„ì§ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')">í¸ì§‘</button>
    <div class="modal-table-wrapper">
      <table class="modal-table">
        <thead>
          <tr>
            <th>#</th>
            <th>í”„ë¡œí•„</th>
            <th>ì„±í•¨</th>
            <th>ë‚˜ì´</th>
            <th>í˜¸ì‹¤</th>
            <th>ì…ì†Œì¼</th>
            <th>íŠ¹ì´ì‚¬í•­</th>
            <th>ë³´í˜¸ì</th>
            <th>ì—°ë½ì²˜</th>
          </tr>
        </thead>
        <tbody id="inmate-modal-body"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Vacancy detail modal -->
<div id="vacancy-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <button id="vacancy-modal-close" class="modal-close">âœ•</button>
    <h2 class="modal-title">ê³µì‹¤ ìƒì„¸</h2>
    <button class="modal-edit-btn" onclick="alert('í¸ì§‘ ê¸°ëŠ¥ì€ ì•„ì§ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')">í¸ì§‘</button>
    <div class="modal-table-wrapper">
      <table class="modal-table">
        <thead>
          <tr>
            <th>í˜¸ì‹¤</th>
            <th>ì¹¨ëŒ€ 1</th>
            <th>ì¹¨ëŒ€ 2</th>
            <th>ì¹¨ëŒ€ 3</th>
            <th>ì¹¨ëŒ€ 4</th>
            <th>ì¹¨ëŒ€ 5</th>
          </tr>
        </thead>
        <tbody id="vacancy-modal-body"></tbody>
      </table>
    </div>
  </div>
</div>
</div>

<!-- Callâ€‘alert modal -->
<div id="call-modal" class="modal-overlay hidden">
  <div class="modal-content">
    <button id="call-modal-close" class="modal-close">âœ•</button>
    <h2 class="modal-title">ë‹´ë‹¹ì í˜¸ì¶œ</h2>
    <p id="call-modal-message" class="call-message"></p>
    <button id="call-phone-btn" class="call-phone-btn">ê´€ë¦¬ì¸ì—ê²Œ ì „í™”í•˜ê¸°</button>
  </div>
</div>

<!-- Outing Report Modal (outing-report.html ìŠ¤íƒ€ì¼ ì¬í™œìš©) -->
<div class="day-detail-modal" id="outing-report-modal">
  <div class="day-detail-content">
    <div class="day-detail-header">
      <span class="day-detail-title" id="outing-report-title">ì™¸ì¶œ ë‚´ì—­</span>
      <button class="day-detail-close" id="outing-report-modal-close">âœ•</button>
    </div>
    <div class="outing-report-summary" id="outing-report-summary">
      <!-- ë™ì  ìƒì„±: ìš”ì•½ ì •ë³´ -->
    </div>
    <div class="day-detail-list" id="outing-report-list">
      <!-- ë™ì  ìƒì„±: ì™¸ì¶œ í•­ëª© -->
    </div>
  </div>
</div>

<!-- Status History Modal -->
<div id="status-history-modal" class="modal-overlay hidden">
  <div class="modal-content status-history-modal">
    <button id="status-history-modal-close" class="modal-close">âœ•</button>
    <h2 class="modal-title">ìƒíƒœ íˆìŠ¤í† ë¦¬</h2>
    <div class="status-history-header">
      <h3 id="status-history-name">í”¼ë³´í˜¸ì</h3>
      <p id="status-history-period">ì§€ë‚œ 24ì‹œê°„</p>
    </div>
    
    <!-- Events Section -->
    <div id="status-history-events" class="status-history-section hidden">
      <h4 class="section-title">âš ï¸ ì´ë²¤íŠ¸</h4>
      <div id="status-events-list" class="status-events-list">
        <!-- ì´ë²¤íŠ¸ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
      </div>
    </div>
    
    <!-- Status Timeline -->
    <div class="status-history-section">
      <h4 class="section-title">ğŸ“Š ìƒíƒœ ë³€í™”</h4>
      <div id="status-timeline" class="status-timeline">
        <!-- ìƒíƒœ íˆìŠ¤í† ë¦¬ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
      </div>
    </div>
  </div>
</div>

<!-- Temperature History Modal -->
<div id="temperatureModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="temperatureModalTitle">ì²´ì˜¨ íˆìŠ¤í† ë¦¬</h2>
      <span class="modal-close" onclick="closeTemperatureModal()">&times;</span>
    </div>
    <div class="modal-body">
      <div class="chart-controls">
        <div class="time-range-selector">
          <button class="range-btn active" data-range="24h">24ì‹œê°„</button>
        </div>
        <div class="temperature-stats">
          <div class="stat-item">
            <span class="stat-label">í”¼ë¶€ì˜¨ í‰ê· </span>
            <span id="tempSkinAvg" class="stat-value">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ëŒ€ê¸°ì˜¨ í‰ê· </span>
            <span id="tempAmbientAvg" class="stat-value">--</span>
          </div>
        </div>
      </div>
      <div class="chart-legend">
        <div class="legend-item">
          <span class="legend-color" style="background: #3B82F6;"></span>
          <span>í”¼ë¶€ì˜¨</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #10B981;"></span>
          <span>ëŒ€ê¸°ì˜¨</span>
        </div>
      </div>
      <canvas id="temperatureChart" width="800" height="400"></canvas>
    </div>
  </div>
</div>

<!-- Heart Rate History Modal -->
<div id="heartRateModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="heartRateModalTitle">ì‹¬ë°•ìˆ˜ íˆìŠ¤í† ë¦¬</h2>
      <span class="modal-close" onclick="closeHeartRateModal()">&times;</span>
    </div>
    <div class="modal-body">
      <div class="chart-controls">
        <div class="time-range-selector">
          <button class="range-btn active" data-range="24h">24ì‹œê°„</button>
          <!-- <button class="range-btn" data-range="12h">12ì‹œê°„</button>
          <button class="range-btn" data-range="6h">6ì‹œê°„</button> -->
        </div>
        <div class="heart-rate-stats">
          <div class="stat-item">
            <span class="stat-label">í‰ê· </span>
            <span id="hrAvg" class="stat-value">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ìµœê³ </span>
            <span id="hrMax" class="stat-value">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ìµœì €</span>
            <span id="hrMin" class="stat-value">--</span>
          </div>
        </div>
      </div>
      <canvas id="heartRateChart" width="800" height="240"></canvas>
      <div id="heartRateInsights" class="heart-rate-insights">
        <!-- ì‹¬ë°•ìˆ˜ ì¸ì‚¬ì´íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë¨ -->
      </div>
    </div>
  </div>
</div>

<!-- Steps History Modal -->
<div id="stepsModal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="stepsModalTitle">ê±¸ìŒìˆ˜ íˆìŠ¤í† ë¦¬</h2>
      <span class="modal-close" onclick="closeStepsModal()">&times;</span>
    </div>
    <div class="modal-body">
      <div class="chart-controls">
        <div class="time-range-selector">
          <button class="range-btn active" data-range="7d">7ì¼</button>
        </div>
        <div class="steps-stats">
          <div class="stat-item">
            <span class="stat-label">ì˜¤ëŠ˜</span>
            <span id="stepsToday" class="stat-value">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">7ì¼ í‰ê· </span>
            <span id="stepsAvg" class="stat-value">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ìµœê³  ê¸°ë¡</span>
            <span id="stepsMax" class="stat-value">--</span>
          </div>
        </div>
      </div>
      <canvas id="stepsChart" width="800" height="280"></canvas>
      <div id="stepsInsights" class="steps-insights">
        <!-- ê±¸ìŒìˆ˜ ì¸ì‚¬ì´íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë¨ -->
      </div>
    </div>
  </div>
</div>

<!-- ì¸ì› ê´€ë¦¬ ëª¨ë‹¬ -->
<div id="resident-management-modal" class="modal-overlay hidden">
  <div class="modal-content resident-management-modal">
    <button class="modal-close" onclick="closeResidentManagementModal()">âœ•</button>
    <h2 class="modal-title">ì¸ì› ê´€ë¦¬</h2>

    <div class="rm-modal-tabs">
      <button class="rm-modal-tab active" onclick="switchResidentTab('list')">ì…ì†Œì ëª©ë¡</button>
      <button class="rm-modal-tab" onclick="switchResidentTab('register')">ì¸ì› ë“±ë¡</button>
      <button class="rm-modal-tab" onclick="switchResidentTab('device')">ì›Œì¹˜ ì—°ê²° ê´€ë¦¬</button>
    </div>

    <div class="rm-modal-body">
      <!-- ì…ì†Œì ëª©ë¡ íƒ­ -->
      <div id="rm-tab-list" class="rm-tab-content">
        <div class="rm-list-header">
          <div class="rm-list-count">
            ì´ <strong id="rm-total-count">26</strong>ëª… ë“±ë¡ |
            ì›Œì¹˜ ì—°ê²° <strong id="rm-connected-count">24</strong> |
            ë¯¸ì—°ê²° <strong id="rm-disconnected-count" style="color:#DC2626;">2</strong>
          </div>
          <div class="rm-list-actions">
            <button id="rm-toggle-deleted-btn" class="btn btn-outline btn-sm" onclick="toggleDeletedResidents()">ì‚­ì œëœ ì…ì†Œì ë³´ê¸°</button>
            <button class="btn btn-primary btn-sm" onclick="switchResidentTab('register')">+ ìƒˆ ì…ì†Œì ë“±ë¡</button>
          </div>
        </div>

        <table class="rm-data-table">
          <thead>
            <tr>
              <th>ì…ì†Œì</th>
              <th>ì„±ë³„</th>
              <th>ë‚˜ì´</th>
              <th>í˜¸ì‹¤</th>
              <th>ì›Œì¹˜ ì—°ê²°</th>
              <th>íŠ¹ì´ì‚¬í•­</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="rm-resident-list">
            <tr>
              <td>
                <div class="rm-resident-profile">
                  <div class="rm-resident-avatar" style="background: #FCE7F3;">ğŸ‘µ</div>
                  <div class="rm-resident-name">ê¹€ìˆœì</div>
                </div>
              </td>
              <td><span class="rm-gender-badge female">ì—¬</span></td>
              <td>84ì„¸</td>
              <td>101í˜¸</td>
              <td><div class="rm-watch-connected"><span>âŒš</span> GW-001</div></td>
              <td><span class="rm-note-text">ê³ í˜ˆì••, ë‹¹ë‡¨</span></td>
              <td>
                <div class="rm-action-btns">
                  <button class="btn btn-secondary btn-sm" onclick="editResident('kim-sonja')">ìˆ˜ì •</button>
                  <button class="btn btn-danger btn-sm">ì‚­ì œ</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class="rm-resident-profile">
                  <div class="rm-resident-avatar" style="background: #DBEAFE;">ğŸ‘´</div>
                  <div class="rm-resident-name">ê¹€ì˜ìˆ˜</div>
                </div>
              </td>
              <td><span class="rm-gender-badge male">ë‚¨</span></td>
              <td>77ì„¸</td>
              <td>101í˜¸</td>
              <td><div class="rm-watch-connected"><span>âŒš</span> GW-002</div></td>
              <td><span class="rm-note-text">-</span></td>
              <td>
                <div class="rm-action-btns">
                  <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
                  <button class="btn btn-danger btn-sm">ì‚­ì œ</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class="rm-resident-profile">
                  <div class="rm-resident-avatar" style="background: #FCE7F3;">ğŸ‘µ</div>
                  <div class="rm-resident-name">ë°•ì˜í¬</div>
                </div>
              </td>
              <td><span class="rm-gender-badge female">ì—¬</span></td>
              <td>79ì„¸</td>
              <td>102í˜¸</td>
              <td><div class="rm-watch-connected"><span>âŒš</span> GW-003</div></td>
              <td><span class="rm-note-text">ì¹˜ë§¤ ì´ˆê¸°</span></td>
              <td>
                <div class="rm-action-btns">
                  <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
                  <button class="btn btn-danger btn-sm">ì‚­ì œ</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class="rm-resident-profile">
                  <div class="rm-resident-avatar" style="background: #E5E7EB;">ğŸ‘µ</div>
                  <div class="rm-resident-name">í•œë¯¸ìˆ™</div>
                </div>
              </td>
              <td><span class="rm-gender-badge female">ì—¬</span></td>
              <td>75ì„¸</td>
              <td>105í˜¸</td>
              <td><span class="rm-watch-disconnected">ë¯¸ì—°ê²°</span></td>
              <td><span class="rm-note-text">ê´€ì ˆì—¼</span></td>
              <td>
                <div class="rm-action-btns">
                  <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
                  <button class="btn btn-danger btn-sm">ì‚­ì œ</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ì¸ì› ë“±ë¡ íƒ­ -->
      <div id="rm-tab-register" class="rm-tab-content hidden">
        <div class="rm-form-section">
          <div class="rm-form-section-title">ğŸ‘¤ ê¸°ë³¸ ì •ë³´</div>
          <div class="rm-form-grid">
            <div class="rm-form-group">
              <label class="rm-form-label">ì´ë¦„ <span class="required">*</span></label>
              <input type="text" class="rm-form-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" id="rm-input-name">
            </div>
            <div class="rm-form-group">
              <label class="rm-form-label">ë‚˜ì´ <span class="required">*</span></label>
              <input type="number" class="rm-form-input" placeholder="ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="rm-input-age">
            </div>
            <div class="rm-form-group">
              <label class="rm-form-label">ì„±ë³„ <span class="required">*</span></label>
              <div class="rm-radio-group">
                <div class="rm-radio-item">
                  <input type="radio" id="rm-gender-male" name="rm-gender" value="male">
                  <label for="rm-gender-male">ë‚¨ì„±</label>
                </div>
                <div class="rm-radio-item">
                  <input type="radio" id="rm-gender-female" name="rm-gender" value="female">
                  <label for="rm-gender-female">ì—¬ì„±</label>
                </div>
              </div>
            </div>
            <div class="rm-form-group">
              <label class="rm-form-label">í˜¸ì‹¤</label>
              <input type="text" class="rm-form-input" placeholder="ì˜ˆ: 101í˜¸" id="rm-input-room">
            </div>
            <div class="rm-form-group full-width">
              <label class="rm-form-label">í”„ë¡œí•„ ì´ë¯¸ì§€</label>
              <div class="rm-profile-selector">
                <div class="rm-profile-options">
                  <div class="rm-profile-option selected">ğŸ‘µ</div>
                  <div class="rm-profile-option">ğŸ‘´</div>
                  <div class="rm-profile-option">ğŸ‘©</div>
                  <div class="rm-profile-option">ğŸ‘¨</div>
                  <div class="rm-profile-option">ğŸ§“</div>
                  <div class="rm-profile-option">ğŸ‘©â€ğŸ¦³</div>
                  <div class="rm-profile-option">ğŸ‘¨â€ğŸ¦³</div>
                  <div class="rm-profile-option">ğŸ§‘â€ğŸ¦³</div>
                  <div class="rm-profile-option">ğŸ‘§</div>
                  <div class="rm-profile-option">ğŸ‘¦</div>
                  <div class="rm-profile-option">ğŸ§”</div>
                  <div class="rm-profile-option">ğŸ‘±â€â™€ï¸</div>
                  <div class="rm-profile-option">ğŸ‘±â€â™‚ï¸</div>
                  <div class="rm-profile-option">ğŸ§•</div>
                  <div class="rm-profile-option">ğŸ‘³â€â™€ï¸</div>
                  <div class="rm-profile-option">ğŸ‘³â€â™‚ï¸</div>
                  <div class="rm-profile-option">ğŸ§‘</div>
                  <div class="rm-profile-option">ğŸ‘¶</div>
                  <div class="rm-profile-option">ğŸ§’</div>
                  <div class="rm-profile-option rm-profile-upload-option" title="ì§ì ‘ ì—…ë¡œë“œ">+</div>
                </div>
              </div>
            </div>
            <div class="rm-form-group full-width">
              <label class="rm-form-label">ë°°ê²½ ìƒ‰ìƒ</label>
              <div class="rm-color-selector">
                <div class="rm-color-options">
                  <div class="rm-color-option selected" data-color="#E5E7EB" style="background: #E5E7EB;"></div>
                  <div class="rm-color-option" data-color="#FEE2E2" style="background: #FEE2E2;"></div>
                  <div class="rm-color-option" data-color="#FECACA" style="background: #FECACA;"></div>
                  <div class="rm-color-option" data-color="#FEF3C7" style="background: #FEF3C7;"></div>
                  <div class="rm-color-option" data-color="#FDE68A" style="background: #FDE68A;"></div>
                  <div class="rm-color-option" data-color="#D1FAE5" style="background: #D1FAE5;"></div>
                  <div class="rm-color-option" data-color="#A7F3D0" style="background: #A7F3D0;"></div>
                  <div class="rm-color-option" data-color="#DBEAFE" style="background: #DBEAFE;"></div>
                  <div class="rm-color-option" data-color="#BFDBFE" style="background: #BFDBFE;"></div>
                  <div class="rm-color-option" data-color="#E0E7FF" style="background: #E0E7FF;"></div>
                  <div class="rm-color-option" data-color="#C7D2FE" style="background: #C7D2FE;"></div>
                  <div class="rm-color-option" data-color="#FCE7F3" style="background: #FCE7F3;"></div>
                  <div class="rm-color-option" data-color="#FBCFE8" style="background: #FBCFE8;"></div>
                  <div class="rm-color-option" data-color="#F3E8FF" style="background: #F3E8FF;"></div>
                  <div class="rm-color-option" data-color="#DDD6FE" style="background: #DDD6FE;"></div>
                  <div class="rm-color-option" data-color="#CCFBF1" style="background: #CCFBF1;"></div>
                  <div class="rm-color-option" data-color="#99F6E4" style="background: #99F6E4;"></div>
                  <div class="rm-color-option" data-color="#FED7AA" style="background: #FED7AA;"></div>
                  <div class="rm-color-option" data-color="#FDBA74" style="background: #FDBA74;"></div>
                  <div class="rm-color-option" data-color="#F5F5F4" style="background: #F5F5F4;"></div>
                </div>
                <div class="rm-profile-preview">
                  <span style="font-size: 12px; color: #6B7280; margin-right: 12px;">ë¯¸ë¦¬ë³´ê¸°:</span>
                  <div class="rm-preview-avatar" id="rm-profile-preview">ğŸ‘µ</div>
                </div>
              </div>
            </div>
            <div class="rm-form-group full-width">
              <label class="rm-form-label">íŠ¹ì´ì‚¬í•­</label>
              <textarea class="rm-form-input rm-form-textarea" placeholder="ê±´ê°• ìƒíƒœ, ì£¼ì˜ì‚¬í•­ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”" id="rm-input-notes"></textarea>
            </div>
          </div>
        </div>

        <div class="rm-form-actions">
          <button class="btn btn-secondary" onclick="switchResidentTab('list')">ì·¨ì†Œ</button>
          <button class="btn btn-primary" onclick="registerResident()">ì…ì†Œì ë“±ë¡</button>
        </div>
      </div>

      <!-- ì›Œì¹˜ ì—°ê²° ê´€ë¦¬ íƒ­ -->
      <div id="rm-tab-device" class="rm-tab-content hidden">
        <div class="rm-watch-register-form">
          <div class="rm-form-section-title">â• ìƒˆ ì›Œì¹˜ ë“±ë¡</div>
          <div class="rm-watch-form-grid">
            <div class="rm-form-group">
              <label class="rm-form-label">ì›Œì¹˜ ID <span class="required">*</span></label>
              <input type="text" class="rm-form-input" placeholder="ì˜ˆ: GW-010" id="rm-watch-id">
            </div>
            <div class="rm-form-group">
              <label class="rm-form-label">ì›Œì¹˜ ì´ë¦„</label>
              <input type="text" class="rm-form-input" placeholder="Galaxy Watch 5" id="rm-watch-name">
            </div>
            <button class="btn btn-primary" onclick="registerWatch()">ë“±ë¡</button>
          </div>
        </div>

        <div class="rm-list-header">
          <div class="rm-list-count">
            ë“±ë¡ëœ ì›Œì¹˜ <strong>30ëŒ€</strong> | ì—°ê²°ë¨ <strong>24ëŒ€</strong> | ë¯¸ì—°ê²° <strong style="color:#DC2626;">6ëŒ€</strong>
          </div>
        </div>

        <div class="rm-device-list">
          <div class="rm-device-card connected">
            <div class="rm-device-info">
              <div class="rm-device-icon">âŒš</div>
              <div>
                <div class="rm-device-name">Galaxy Watch 5</div>
                <div class="rm-device-id">GW-001</div>
                <div class="rm-device-status">
                  <span class="rm-device-status-dot"></span>
                  ì˜¨ë¼ì¸ | ë°°í„°ë¦¬ 85%
                </div>
              </div>
            </div>
            <div class="rm-device-mapping">
              <div class="rm-mapped-resident">
                <div class="rm-mapped-avatar" style="background: #FCE7F3;">ğŸ‘µ</div>
                <span class="rm-mapped-name">ê¹€ìˆœì</span>
              </div>
              <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
              <button class="btn btn-danger btn-sm">ì—°ê²° í•´ì œ</button>
            </div>
          </div>

          <div class="rm-device-card connected">
            <div class="rm-device-info">
              <div class="rm-device-icon">âŒš</div>
              <div>
                <div class="rm-device-name">Galaxy Watch 5</div>
                <div class="rm-device-id">GW-002</div>
                <div class="rm-device-status">
                  <span class="rm-device-status-dot"></span>
                  ì˜¨ë¼ì¸ | ë°°í„°ë¦¬ 72%
                </div>
              </div>
            </div>
            <div class="rm-device-mapping">
              <div class="rm-mapped-resident">
                <div class="rm-mapped-avatar" style="background: #DBEAFE;">ğŸ‘´</div>
                <span class="rm-mapped-name">ê¹€ì˜ìˆ˜</span>
              </div>
              <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
              <button class="btn btn-danger btn-sm">ì—°ê²° í•´ì œ</button>
            </div>
          </div>

          <div class="rm-device-card">
            <div class="rm-device-info">
              <div class="rm-device-icon" style="opacity:0.5;">âŒš</div>
              <div>
                <div class="rm-device-name">Galaxy Watch 5</div>
                <div class="rm-device-id">GW-010</div>
                <div class="rm-device-status">
                  <span class="rm-device-status-dot offline"></span>
                  ì˜¤í”„ë¼ì¸
                </div>
              </div>
            </div>
            <div class="rm-device-mapping">
              <select class="rm-mapping-select">
                <option value="">ì…ì†Œì ì„ íƒ...</option>
                <option value="han">í•œë¯¸ìˆ™ (105í˜¸)</option>
                <option value="kim">ê¹€íƒœí˜¸ (107í˜¸)</option>
              </select>
              <button class="btn btn-primary btn-sm">ì—°ê²°</button>
              <button class="btn btn-secondary btn-sm">ìˆ˜ì •</button>
              <button class="btn btn-danger btn-sm">ì‚­ì œ</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- API Configuration -->
<script src="config.js?v=2.0.0"></script>
<script>
// ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ
document.addEventListener('DOMContentLoaded', function() {
    const username = localStorage.getItem('username');
    const userDisplayElement = document.getElementById('user-display-name');
    if (username && userDisplayElement) {
        userDisplayElement.textContent = username;
    }
});

// ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
function logout() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('username');
    localStorage.removeItem('userType');
    localStorage.removeItem('watcherUserId');
    window.location.href = 'index.html';
}

// ë°ëª¨ ëª¨ë“œë¥¼ ìœ ì§€í•˜ë©´ì„œ í˜ì´ì§€ ì´ë™
function navigateTo(page) {
    const urlParams = new URLSearchParams(window.location.search);
    const isDemoMode = urlParams.get('demo') === 'true';

    // userTypeì— ë”°ë¼ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ë¶„ê¸°
    if (page === 'dashboard.html') {
        const userType = localStorage.getItem('userType');
        if (userType === 'silvercare') {
            page = 'dashboard-poc.html';
        } else if (userType === 'silvercare2') {
            page = 'dashboard-v2.html';
        }
    }

    if (isDemoMode) {
        window.location.href = page + '?demo=true';
    } else {
        window.location.href = page;
    }
}
</script>

<!-- ë°ëª¨ ëª¨ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë¨¼ì € ë¡œë“œ (URLì— ?demo=trueê°€ ìˆì„ ë•Œë§Œ) -->
<script>
if (new URLSearchParams(window.location.search).get('demo') === 'true') {
    document.write('<script src="demo-controller.js?v=1.0.0"><\/script>');
}
</script>

<script src="script.js?v=2.0.0"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>í—¬ë¡œì˜¨ AI ë¦¬í¬íŠ¸</title>
  <link rel="stylesheet" href="style.css?v=1.0.0">
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* AI ë¦¬í¬íŠ¸ ì „ìš© ìŠ¤íƒ€ì¼ */
    .ai-report-main {
      max-width: 100%;
      padding: 10px 32px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* í†µí•© í—¤ë” */
    .ai-report-header {
      display: flex;
      align-items: center;
      gap: 16px;
      background: #FFFFFF;
      border-radius: 12px;
      padding: 12px 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .month-nav {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .month-nav-btn {
      width: 32px;
      height: 32px;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      color: #6B7280;
    }

    .month-nav-btn:hover {
      background: #F3F4F6;
      border-color: #D1D5DB;
      color: #374151;
    }

    .month-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #111827;
      min-width: 120px;
      text-align: center;
    }

    .header-divider {
      width: 1px;
      height: 24px;
      background: #E5E7EB;
    }

    .filter-select {
      padding: 6px 12px;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
      font-size: 14px;
      font-family: 'Pretendard', sans-serif;
      background: #fff;
      min-width: 150px;
      cursor: pointer;
    }

    .filter-select:focus {
      outline: none;
      border-color: #2A6AA6;
    }

    .generate-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #6366F1, #8B5CF6);
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .generate-btn:hover {
      background: linear-gradient(135deg, #4F46E5, #7C3AED);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .generate-btn:disabled {
      background: #D1D5DB;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .print-btn {
      padding: 6px 12px;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
      font-size: 14px;
      font-family: 'Pretendard', sans-serif;
      background: #fff;
      cursor: pointer;
      transition: all 0.2s;
      margin-left: auto;
    }

    .print-btn:hover {
      background: #F3F4F6;
    }

    /* AI ë¦¬í¬íŠ¸ ì¹´ë“œ */
    .ai-report-card {
      background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 50%, #F0FDFA 100%);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      border: 1px solid #BAE6FD;
    }

    .ai-report-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.1rem;
      font-weight: 700;
      color: #0369A1;
      margin-bottom: 16px;
    }

    .ai-report-title .ai-icon {
      font-size: 1.4rem;
    }

    .ai-report-content {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      line-height: 1.8;
      color: #374151;
      font-size: 15px;
      white-space: pre-wrap;
    }

    .ai-report-content.loading {
      text-align: center;
      color: #6B7280;
      padding: 40px;
    }

    .ai-report-content .loading-spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid #E5E7EB;
      border-top-color: #6366F1;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 10px;
      vertical-align: middle;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* í”„ë¡œí•„ ì¹´ë“œ */
    .resident-profile-card {
      background: #fff;
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .resident-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .resident-info h2 {
      font-size: 1.25rem;
      font-weight: 700;
      color: #111827;
      margin: 0 0 4px 0;
    }

    .resident-info .resident-meta {
      font-size: 14px;
      color: #6B7280;
    }

    /* í†µê³„ ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 16px;
    }

    .stats-card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .stats-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }

    .stats-card-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .stats-card-icon.health { background: #FEE2E2; }
    .stats-card-icon.activity { background: #DCFCE7; }
    .stats-card-icon.attendance { background: #DBEAFE; }
    .stats-card-icon.outing { background: #FEF3C7; }
    .stats-card-icon.event { background: #F3E8FF; }

    .stats-card-title {
      font-size: 1rem;
      font-weight: 600;
      color: #374151;
    }

    .stats-card-body {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .stats-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #F3F4F6;
      gap: 12px;
    }

    .stats-row:last-child {
      border-bottom: none;
    }

    .stats-label {
      font-size: 14px;
      color: #6B7280;
      flex-shrink: 0;
      white-space: nowrap;
    }

    .stats-value {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
      text-align: right;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      max-width: 180px;
    }

    .stats-value.highlight {
      color: #059669;
    }

    .stats-value.warning {
      color: #DC2626;
    }

    .stats-value.info {
      color: #2563EB;
    }

    /* ì„ íƒ ì•ˆë‚´ */
    .select-prompt {
      background: #F9FAFB;
      border: 2px dashed #D1D5DB;
      border-radius: 16px;
      padding: 60px 40px;
      text-align: center;
      color: #6B7280;
    }

    .select-prompt-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .select-prompt-text {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .select-prompt-sub {
      font-size: 14px;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .ai-report-main {
        padding: 10px 16px;
      }

      .ai-report-header {
        flex-wrap: wrap;
        gap: 12px;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
    @media print {
      .main-header, .ai-report-header, .no-print {
        display: none !important;
      }

      .ai-report-main {
        padding: 0;
      }

      .ai-report-card, .stats-card {
        box-shadow: none;
        border: 1px solid #E5E7EB;
      }
    }
  </style>
</head>
<body>
  <div class="main-bg">
    <header class="main-header">
      <div class="logo-nav">
        <img src="assets/hello-on_logotype.png" alt="í—¬ë¡œì˜¨ ë¡œê³ " class="hello-logo" />
        <nav class="gnb">
          <button class="gnb-btn" data-page="dashboard.html" onclick="navigateTo('dashboard.html')"><span class="icon dashboard"></span>ëŒ€ì‹œë³´ë“œ</button>
          <button class="gnb-btn" data-page="record.html" onclick="navigateTo('record.html')"><span class="icon record"></span>ê´€ë¦¬ê¸°ë¡</button>
          <button class="gnb-btn" data-page="outing-report.html" onclick="navigateTo('outing-report.html')"><span class="icon record"></span>ì™¸ì¶œë¦¬í¬íŠ¸</button>
          <button class="gnb-btn" data-page="attendance-report.html" onclick="navigateTo('attendance-report.html')"><span class="icon record"></span>ì¶œí‡´ê·¼</button>
          <button class="gnb-btn active" data-page="ai-report.html" onclick="navigateTo('ai-report.html')"><span class="icon record"></span>AIë¦¬í¬íŠ¸</button>
        </nav>
      </div>
      <div class="header-actions">
        <button class="settings-btn" title="ì¸ì› ê´€ë¦¬">
          <span class="icon settings"></span>
        </button>
        <div class="user-menu">
          <span class="user-name" id="user-display-name">silvercare2</span>
          <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
      </div>
    </header>

    <main class="ai-report-main">
      <!-- í•„í„° í—¤ë” -->
      <section class="ai-report-header">
        <div class="month-nav">
          <button class="month-nav-btn" onclick="changeMonth(-1)">â—€</button>
          <span class="month-title" id="month-title">2025ë…„ 12ì›”</span>
          <button class="month-nav-btn" onclick="changeMonth(1)">â–¶</button>
        </div>
        <span class="header-divider"></span>
        <select id="filter-resident" class="filter-select" onchange="onResidentChange()">
          <option value="">ì…ì†Œì ì„ íƒ</option>
          <option value="demo001">ê¹€ì˜ìˆ˜ (101í˜¸)</option>
          <option value="demo002">ë°•ìˆœì (102í˜¸)</option>
          <option value="demo003">ì´ê²½ìˆ™ (103í˜¸)</option>
          <option value="demo004">ìµœì˜ì (104í˜¸)</option>
          <option value="demo005">ê¹€ì •ì„ (105í˜¸)</option>
        </select>
        <button class="generate-btn" id="generate-btn" onclick="generateReport()" disabled>
          <span>âœ¨</span> AI ë¦¬í¬íŠ¸ ìƒì„±
        </button>
        <button class="print-btn no-print" onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„</button>
      </section>

      <!-- ì…ì†Œì ì„ íƒ ì•ˆë‚´ (ì´ˆê¸° ìƒíƒœ) -->
      <section class="select-prompt" id="select-prompt">
        <div class="select-prompt-icon">ğŸ“Š</div>
        <div class="select-prompt-text">ì…ì†Œìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
        <div class="select-prompt-sub">1ë‹¬ê°„ì˜ ê±´ê°• ë°ì´í„°ë¥¼ AIê°€ ë¶„ì„í•˜ì—¬ ì¢…í•© ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</div>
      </section>

      <!-- ë¦¬í¬íŠ¸ ì»¨í…ì¸  (ì…ì†Œì ì„ íƒ í›„) -->
      <div id="report-content" style="display: none;">
        <!-- ì…ì†Œì í”„ë¡œí•„ -->
        <section class="resident-profile-card">
          <div class="resident-avatar" id="resident-avatar" style="background: #DBEAFE;">ğŸ‘´</div>
          <div class="resident-info">
            <h2 id="resident-name">ê¹€ì˜ìˆ˜</h2>
            <div class="resident-meta"><span id="resident-age">77ì„¸</span> Â· <span id="resident-room">101í˜¸</span> Â· <span id="report-period">2025ë…„ 12ì›”</span></div>
          </div>
        </section>

        <!-- AI ì¢…í•© ë¦¬í¬íŠ¸ -->
        <section class="ai-report-card">
          <div class="ai-report-title">
            <span class="ai-icon">ğŸ¤–</span>
            <span>AI ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸</span>
          </div>
          <div class="ai-report-content" id="ai-report-text">
<strong>ğŸ“‹ ê±´ê°• ìƒíƒœ ì¢…í•© í‰ê°€</strong>
ê¹€ì˜ìˆ˜ë‹˜ì€ ì´ë²ˆ ë‹¬ ì „ë°˜ì ìœ¼ë¡œ ì•ˆì •ì ì¸ ê±´ê°• ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ê³„ì‹­ë‹ˆë‹¤. ì‹¬ë°•ìˆ˜ì™€ ì²´ì˜¨ ëª¨ë‘ ì •ìƒ ë²”ìœ„ ë‚´ì—ì„œ ìœ ì§€ë˜ê³  ìˆìœ¼ë©°, ê·œì¹™ì ì¸ í™œë™ íŒ¨í„´ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.

<strong>âš ï¸ ì£¼ì˜ê°€ í•„ìš”í•œ ê±´ê°• ì§€í‘œ</strong>
â€¢ 12ì›” 15ì¼ ì²´ì˜¨ì´ 37.8Â°Cë¡œ ì¼ì‹œì ìœ¼ë¡œ ìƒìŠ¹í•œ ê¸°ë¡ì´ ìˆìŠµë‹ˆë‹¤.
â€¢ ì‹¬ë°•ìˆ˜ê°€ ê°„í—ì ìœ¼ë¡œ 90bpmì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš°ê°€ ìˆì–´ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

<strong>ğŸš¶ í™œë™ëŸ‰ ë° ìƒí™œ íŒ¨í„´ ë¶„ì„</strong>
ì¼í‰ê·  3,245ë³´ë¥¼ ê±¸ìœ¼ì‹œë©°, ì˜¤ì „ 10ì‹œ~11ì‹œì— ê°€ì¥ í™œë°œí•œ í™œë™ì„ ë³´ì´ì‹­ë‹ˆë‹¤. ì™¸ì¶œ íšŸìˆ˜ëŠ” ì›” 4íšŒë¡œ ì ì ˆí•œ ìˆ˜ì¤€ì´ë©°, ì£¼ë¡œ ë³‘ì› ë°©ë¬¸ê³¼ ì‚°ì±…ì„ í•˜ì…¨ìŠµë‹ˆë‹¤.

<strong>ğŸ’¡ ì¼€ì–´ ê¶Œì¥ì‚¬í•­</strong>
1. ì˜¤í›„ ì‹œê°„ëŒ€ í™œë™ëŸ‰ì´ ì ìœ¼ë‹ˆ, ê°€ë²¼ìš´ ì‚°ì±…ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
2. ì²´ì˜¨ ë³€í™”ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ ì£¼ì‹œê³ , 37.5Â°C ì´ìƒ ì‹œ ë‹´ë‹¹ìì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”.
3. ìˆ˜ë¶„ ì„­ì·¨ëŸ‰ì„ ëŠ˜ë ¤ ì£¼ì‹œë©´ ì „ë°˜ì ì¸ ê±´ê°• ìœ ì§€ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.

<strong>ğŸ” ë‹¤ìŒ ë‹¬ ê´€ì°° í¬ì¸íŠ¸</strong>
ì‹¬ë°•ìˆ˜ ë³€ë™ íŒ¨í„´ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì²´ì˜¨ ìƒìŠ¹ ì‹œ ì¡°ê¸° ëŒ€ì‘ì´ í•„ìš”í•©ë‹ˆë‹¤.
          </div>
        </section>

        <!-- ìƒì„¸ í†µê³„ ì¹´ë“œë“¤ -->
        <section class="stats-grid">
          <!-- ì‹¬ë°• ì§€í‘œ -->
          <div class="stats-card">
            <div class="stats-card-header">
              <div class="stats-card-icon health">â¤ï¸</div>
              <div class="stats-card-title">ì‹¬ë°• ì§€í‘œ</div>
            </div>
            <div class="stats-card-body">
              <div class="stats-row">
                <span class="stats-label">ì‹¬ë°•ìˆ˜ (í‰ê· )</span>
                <span class="stats-value">72 bpm</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì‹¬ë°•ìˆ˜ (ë²”ìœ„)</span>
                <span class="stats-value">58~95 bpm</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì €ì‹¬ë°• ë°œìƒ (40bpm ë¯¸ë§Œ)</span>
                <span class="stats-value highlight">0íšŒ</span>
              </div>
            </div>
          </div>

          <!-- í™œë™ëŸ‰ -->
          <div class="stats-card">
            <div class="stats-card-header">
              <div class="stats-card-icon activity">ğŸš¶</div>
              <div class="stats-card-title">í™œë™ëŸ‰</div>
            </div>
            <div class="stats-card-body">
              <div class="stats-row">
                <span class="stats-label">ì´ ê±¸ìŒìˆ˜</span>
                <span class="stats-value">97,350 ë³´</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì¼í‰ê·  ê±¸ìŒìˆ˜</span>
                <span class="stats-value">3,245 ë³´</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ìµœë‹¤ ê±¸ìŒì¼</span>
                <span class="stats-value info">12/8 (5,120ë³´)</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ìµœì†Œ ê±¸ìŒì¼</span>
                <span class="stats-value">12/22 (1,230ë³´)</span>
              </div>
            </div>
          </div>

          <!-- ì¶œí‡´ê·¼ -->
          <div class="stats-card">
            <div class="stats-card-header">
              <div class="stats-card-icon attendance">ğŸ“…</div>
              <div class="stats-card-title">ì¶œí‡´ê·¼ í˜„í™©</div>
            </div>
            <div class="stats-card-body">
              <div class="stats-row">
                <span class="stats-label">ì¶œê·¼ì¼</span>
                <span class="stats-value">22ì¼ / 23ì¼</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì¶œê·¼ìœ¨</span>
                <span class="stats-value highlight">95.7%</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">í‰ê·  ì²´ë¥˜ì‹œê°„</span>
                <span class="stats-value">7ì‹œê°„ 23ë¶„</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">í‰ê·  ì¶œê·¼ì‹œê°„</span>
                <span class="stats-value">09:12</span>
              </div>
            </div>
          </div>

          <!-- ì™¸ì¶œ í˜„í™© -->
          <div class="stats-card">
            <div class="stats-card-header">
              <div class="stats-card-icon outing">ğŸš—</div>
              <div class="stats-card-title">ì™¸ì¶œ í˜„í™©</div>
            </div>
            <div class="stats-card-body">
              <div class="stats-row">
                <span class="stats-label">ì´ ì™¸ì¶œ íšŸìˆ˜</span>
                <span class="stats-value">4íšŒ</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì´ ì™¸ì¶œ ì‹œê°„</span>
                <span class="stats-value">8ì‹œê°„ 45ë¶„</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì£¼ìš” ë°©ë¬¸ì§€</span>
                <span class="stats-value info">ë³‘ì›, í¸ì˜ì </span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ìµœì¥ ì™¸ì¶œ</span>
                <span class="stats-value">12/10 (3ì‹œê°„)</span>
              </div>
            </div>
          </div>

          <!-- ì´ë²¤íŠ¸ -->
          <div class="stats-card">
            <div class="stats-card-header">
              <div class="stats-card-icon event">ğŸš¨</div>
              <div class="stats-card-title">ì´ë²¤íŠ¸ ë°œìƒ</div>
            </div>
            <div class="stats-card-body">
              <div class="stats-row">
                <span class="stats-label">ë‚™ìƒ ê°ì§€</span>
                <span class="stats-value highlight">0íšŒ</span>
              </div>
              <div class="stats-row">
                <span class="stats-label">ì €ì‹¬ë°• ì•Œë¦¼</span>
                <span class="stats-value highlight">0íšŒ</span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- ì¸ì› ê´€ë¦¬ ëª¨ë‹¬ (ê³µí†µ) -->
  <div id="resident-management-modal" class="modal-overlay hidden">
    <div class="modal-content resident-management-modal">
      <button class="modal-close" onclick="closeResidentManagementModal()">âœ•</button>
      <h2 class="modal-title">ì¸ì› ê´€ë¦¬</h2>
      <div class="rm-modal-tabs">
        <button class="rm-modal-tab active" onclick="switchResidentTab('list')">ì…ì†Œì ëª©ë¡</button>
        <button class="rm-modal-tab" onclick="switchResidentTab('register')">ì¸ì› ë“±ë¡</button>
        <button class="rm-modal-tab" onclick="switchResidentTab('device')">ì›Œì¹˜ ì—°ê²° ê´€ë¦¬</button>
      </div>
      <div class="rm-modal-body">
        <div id="rm-tab-list" class="rm-tab-content">
          <div class="rm-list-header">
            <div class="rm-list-count">
              ì´ <strong id="rm-total-count">0</strong>ëª… ë“±ë¡ |
              ì›Œì¹˜ ì—°ê²° <strong id="rm-connected-count">0</strong> |
              ë¯¸ì—°ê²° <strong id="rm-disconnected-count" style="color:#DC2626;">0</strong>
            </div>
          </div>
          <table class="rm-data-table">
            <thead>
              <tr>
                <th>ì…ì†Œì</th>
                <th>ì„±ë³„</th>
                <th>ë‚˜ì´</th>
                <th>í˜¸ì‹¤</th>
                <th>ì›Œì¹˜ ì—°ê²°</th>
                <th>íŠ¹ì´ì‚¬í•­</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="rm-resident-list"></tbody>
          </table>
        </div>
        <div id="rm-tab-register" class="rm-tab-content hidden"></div>
        <div id="rm-tab-device" class="rm-tab-content hidden"></div>
      </div>
    </div>
  </div>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="config.js?v=1.0.1"></script>
  <script src="script.js?v=1.0.0"></script>
  <script src="ai-report.js?v=1.0.0"></script>
</body>
</html>
